<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice Translator (MM-KR)</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background-color: #fff5eb; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .app-container { background: #fffcf9; width: 100%; max-width: 450px; height: 90vh; border-radius: 30px; display: flex; flex-direction: column; box-shadow: 0 10px 30px rgba(0,0,0,0.05); overflow: hidden; }
        .display-area { flex: 1; display: flex; align-items: center; justify-content: center; padding: 40px; text-align: center; font-size: 26px; color: #5f5a54; font-weight: 500; overflow-y: auto; line-height: 1.5; }
        .footer { background: #fee7d3; padding: 40px 20px; border-radius: 40px 40px 0 0; }
        
        /* Mic Buttons with Flag Backgrounds */
        .mic-row { display: flex; justify-content: space-around; align-items: center; }
        .mic-btn { 
            width: 100px; height: 100px; border-radius: 50%; border: 5px solid #8d5524; 
            cursor: pointer; display: flex; align-items: center; justify-content: center; 
            font-size: 35px; transition: 0.3s; background-size: cover; background-position: center;
            position: relative; box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Myanmar Flag Mic */
        #btnMM { 
            background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('https://flagcdn.com/w320/mm.png'); 
        }
        
        /* Korea Flag Mic */
        #btnKR { 
            background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://flagcdn.com/w320/kr.png'); 
        }

        .mic-btn span { color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.8); z-index: 1; }
        .mic-btn:active { transform: scale(0.9); }
        .listening { border-color: #ff4757; animation: pulse 1.5s infinite; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.6); } 70% { box-shadow: 0 0 0 20px rgba(255, 71, 87, 0); } 100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); } }
        
        .label { text-align: center; margin-top: 10px; font-weight: bold; color: #8d5524; font-size: 14px; }
        .btn-group { display: flex; flex-direction: column; align-items: center; }
    </style>
</head>
<body>

<div class="app-container">
    <div class="display-area" id="displayText">
        á€…á€€á€¬á€¸á€•á€¼á€±á€¬á€›á€”á€º á€¡á€œá€¶á€€á€­á€¯ á€”á€¾á€­á€•á€ºá€•á€«
    </div>

    <div class="footer">
        <div class="mic-row">
            <div class="btn-group">
                <button class="mic-btn" id="btnMM" onclick="startTranslate('my-MM', 'ko')"><span>ðŸŽ¤</span></button>
                <div class="label">MYANMAR</div>
            </div>
            <div class="btn-group">
                <button class="mic-btn" id="btnKR" onclick="startTranslate('ko-KR', 'my')"><span>ðŸŽ¤</span></button>
                <div class="label">KOREAN</div>
            </div>
        </div>
    </div>
</div>

<script>
    const displayText = document.getElementById('displayText');

    function speak(text, langCode) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = langCode;
        window.speechSynthesis.speak(utterance);
    }

    async function startTranslate(inputLang, targetLang) {
        if (!('webkitSpeechRecognition' in window)) {
            alert("Browser support á€™á€œá€¯á€•á€ºá€•á€«á‹ Chrome á€€á€­á€¯á€žá€¯á€¶á€¸á€•á€±á€¸á€•á€«á‹");
            return;
        }

        const recognition = new webkitSpeechRecognition();
        recognition.lang = inputLang;
        const activeBtn = inputLang === 'my-MM' ? document.getElementById('btnMM') : document.getElementById('btnKR');
        
        activeBtn.classList.add('listening');
        displayText.innerText = "... á€”á€¬á€¸á€‘á€±á€¬á€„á€ºá€”á€±á€žá€Šá€º ...";

        recognition.onresult = async (event) => {
            const transcript = event.results[0][0].transcript;
            displayText.innerText = "á€˜á€¬á€žá€¬á€•á€¼á€”á€ºá€”á€±á€žá€Šá€º...";

            try {
                const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${inputLang.split('-')[0]}&tl=${targetLang}&dt=t&q=${encodeURI(transcript)}`);
                const data = await res.json();
                const translatedText = data[0][0][0];

                displayText.innerHTML = `<div style="font-size: 18px; color: #a0978d; margin-bottom:10px;">${transcript}</div><div><b>${translatedText}</b></div>`;
                
                speak(translatedText, targetLang === 'ko' ? 'ko-KR' : 'my-MM');
            } catch (error) {
                displayText.innerText = "Error á€–á€¼á€…á€ºá€žá€½á€¬á€¸á€•á€«á€•á€¼á€®á‹ á€•á€¼á€”á€ºá€€á€¼á€­á€¯á€¸á€…á€¬á€¸á€€á€¼á€Šá€·á€ºá€•á€«á‹";
            }
        };

        recognition.onend = () => { activeBtn.classList.remove('listening'); };
        recognition.start();
    }
</script>

</body>
</html>
