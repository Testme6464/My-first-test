<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MM-TH Voice Translator</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background-color: #f7f3f0; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
            overflow: hidden;
        }
        .app-container { 
            background: #ffffff; 
            width: 100%; 
            max-width: 480px; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            position: relative;
        }
        /* á€…á€¬á€á€¬á€¸á€•á€¼á€á€á€Šá€·á€ºá€”á€±á€›á€¬ */
        .display-area { 
            flex: 1; 
            display: flex; 
            flex-direction: column;
            justify-content: center; 
            align-items: center; 
            padding: 30px; 
            text-align: center; 
            font-size: 24px; 
            color: #4a4a4a;
            overflow-y: auto;
        }
        .original-text { font-size: 18px; color: #999; margin-bottom: 10px; }
        .translated-text { font-weight: bold; color: #333; }

        /* á€¡á€±á€¬á€€á€ºá€á€¼á€±á€¡á€•á€­á€¯á€„á€ºá€¸ */
        .footer { 
            background: #fff0e0; 
            padding: 40px 10px; 
            border-radius: 40px 40px 0 0; 
            box-shadow: 0 -5px 15px rgba(0,0,0,0.05);
        }
        .mic-row { 
            display: flex; 
            justify-content: space-around; 
            align-items: center; 
        }
        .btn-group { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            gap: 12px;
        }
        .lang-label {
            background: white;
            padding: 5px 15px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: bold;
            color: #555;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        /* á€¡á€œá€¶á€”á€±á€¬á€€á€ºá€á€¶á€–á€¼á€„á€·á€º á€á€œá€¯á€á€ºá€™á€»á€¬á€¸ */
        .mic-btn { 
            width: 90px; 
            height: 90px; 
            border-radius: 50%; 
            border: 4px solid #fff; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background-size: cover; 
            background-position: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transition: transform 0.2s;
        }
        #btnMM { background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://flagcdn.com/w320/mm.png'); }
        #btnTH { background-image: linear-gradient(rgba(0,0,0,0.2), rgba(0,0,0,0.2)), url('https://flagcdn.com/w320/th.png'); }
        
        .mic-btn span { font-size: 30px; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        .mic-btn:active { transform: scale(0.9); }

        /* á€¡á€á€¶á€–á€™á€ºá€¸á€”á€±á€…á€‰á€º á€•á€¼á€á€™á€Šá€·á€º Animation */
        .listening { 
            border-color: #ff4757 !important; 
            animation: pulse 1.5s infinite; 
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(255, 71, 87, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 71, 87, 0); }
        }
    </style>
</head>
<body>

<div class="app-container">
    <div class="display-area" id="displayArea">
        <div id="statusText">á€…á€€á€¬á€¸á€•á€¼á€±á€¬á€›á€”á€º á€¡á€œá€¶á€€á€­á€¯ á€”á€¾á€­á€•á€ºá€•á€«</div>
    </div>

    <div class="footer">
        <div class="mic-row">
            <div class="btn-group">
                <div class="lang-label">Myanmar</div>
                <button class="mic-btn" id="btnMM" onclick="startRecognition('my-MM', 'th')"><span>ğŸ¤</span></button>
            </div>
            <div class="btn-group">
                <div class="lang-label">Thai</div>
                <button class="mic-btn" id="btnTH" onclick="startRecognition('th-TH', 'my')"><span>ğŸ¤</span></button>
            </div>
        </div>
    </div>
</div>

<script>
    const displayArea = document.getElementById('displayArea');
    let recognition;

    // á€¡á€á€¶á€•á€¼á€”á€ºá€‘á€½á€€á€ºá€•á€±á€¸á€á€Šá€·á€º Function
    function speak(text, langCode) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = langCode;
        // á€¡á€á€¶á€”á€¾á€¯á€”á€ºá€¸á€€á€­á€¯ á€•á€¯á€¶á€™á€¾á€”á€ºá€‘á€¬á€¸á€•á€« (1.0)
        utterance.rate = 1.0;
        window.speechSynthesis.speak(utterance);
    }

    function startRecognition(inputLang, targetLang) {
        if (!('webkitSpeechRecognition' in window)) {
            alert("á€á€„á€·á€º Browser á€á€Šá€º á€¡á€á€¶á€–á€™á€ºá€¸á€…á€”á€…á€ºá€€á€­á€¯ Support á€™á€œá€¯á€•á€ºá€•á€«á‹ Chrome á€á€¯á€¶á€¸á€•á€±á€¸á€•á€«á‹");
            return;
        }

        // á€¡á€á€¶á€–á€™á€ºá€¸á€…á€”á€…á€ºá€¡á€á€…á€º á€…á€á€„á€ºá€á€¼á€„á€ºá€¸
        recognition = new webkitSpeechRecognition();
        recognition.lang = inputLang;
        recognition.interimResults = false; // á€…á€€á€¬á€¸á€•á€¼á€±á€¬á€•á€¼á€®á€¸á€™á€¾ á€›á€œá€’á€ºá€‘á€¯á€á€ºá€›á€”á€º
        recognition.maxAlternatives = 1;

        const activeBtn = inputLang === 'my-MM' ? document.getElementById('btnMM') : document.getElementById('btnTH');
        
        recognition.onstart = () => {
            activeBtn.classList.add('listening');
            displayArea.innerHTML = `<div id="statusText">á€”á€¬á€¸á€‘á€±á€¬á€„á€ºá€”á€±á€á€Šá€º...</div>`;
        };

        recognition.onerror = (event) => {
            console.error(event.error);
            activeBtn.classList.remove('listening');
            displayArea.innerHTML = `<div>Error: ${event.error}<br>á€•á€¼á€”á€ºá€€á€¼á€­á€¯á€¸á€…á€¬á€¸á€€á€¼á€Šá€·á€ºá€•á€«á‹</div>`;
        };

        recognition.onend = () => {
            activeBtn.classList.remove('listening');
        };

        recognition.onresult = async (event) => {
            const transcript = event.results[0][0].transcript;
            displayArea.innerHTML = `<div class="original-text">${transcript}</div><div>á€˜á€¬á€á€¬á€•á€¼á€”á€ºá€”á€±á€á€Šá€º...</div>`;

            try {
                // Google Translate Free API á€¡á€á€¯á€¶á€¸á€•á€¼á€¯á€á€¼á€„á€ºá€¸
                const response = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=${inputLang.split('-')[0]}&tl=${targetLang}&dt=t&q=${encodeURI(transcript)}`);
                const data = await response.json();
                const translatedText = data[0][0][0];

                // á€›á€œá€’á€ºá€•á€¼á€á€á€¼á€„á€ºá€¸
                displayArea.innerHTML = `
                    <div class="original-text">${transcript}</div>
                    <div class="translated-text">${translatedText}</div>
                `;

                // á€˜á€¬á€á€¬á€•á€¼á€”á€ºá€‘á€¬á€¸á€á€Šá€·á€ºá€˜á€¬á€á€¬á€…á€€á€¬á€¸á€–á€¼á€„á€·á€º á€¡á€á€¶á€‘á€½á€€á€ºá€•á€±á€¸á€á€¼á€„á€ºá€¸
                const speechLang = targetLang === 'th' ? 'th-TH' : 'my-MM';
                speak(translatedText, speechLang);

            } catch (error) {
                displayArea.innerHTML = `<div>á€˜á€¬á€á€¬á€•á€¼á€”á€ºá€›á€¬á€á€½á€„á€º á€¡á€á€€á€ºá€¡á€á€²á€›á€¾á€­á€”á€±á€•á€«á€á€Šá€ºá‹</div>`;
            }
        };

        recognition.start();
    }
</script>

</body>
</html>
